<ion-content class="fritos-theme" scroll-y="false">
  <div class="register-container">
    <div class="header-registro">
  <ion-button fill="clear" (click)="volver()" class="btn-volver">
    <ion-icon name="chevron-back-outline" slot="start"></ion-icon>
    VOLVER
  </ion-button>
  <h2 class="register-subtitle">NUEVO RECLUTA</h2>
</div>

    <div *ngIf="perfilLogueado === 'admin'" class="alta-seccion">
      
      <ion-button expand="block" class="btn-scan" (click)="escanearDNI()">
        <ion-icon name="barcode-outline" slot="start"></ion-icon>
        ESCANEAR DNI
      </ion-button>

      <form [formGroup]="usuarioForm" (ngSubmit)="registrar()">
        <ion-row>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="floating">Nombres</ion-label>
              <ion-input formControlName="nombres"></ion-input>
            </ion-item>
            <small class="err" *ngIf="usuarioForm.get('nombres')?.touched && usuarioForm.get('nombres')?.invalid">FALTA NOMBRE</small>
          </ion-col>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="floating">Apellidos</ion-label>
              <ion-input formControlName="apellidos"></ion-input>
            </ion-item>
            <small class="err" *ngIf="usuarioForm.get('apellidos')?.touched && usuarioForm.get('apellidos')?.invalid">FALTA APELLIDO</small>
          </ion-col>
        </ion-row>

        <ion-item lines="full">
          <ion-label position="floating">DNI / ID ESTELAR</ion-label>
          <ion-input type="number" formControlName="dni"></ion-input>
        </ion-item>
        <small class="err" *ngIf="usuarioForm.get('dni')?.touched && usuarioForm.get('dni')?.invalid">ID INVÁLIDO</small>

        

        <ion-item lines="full">
          <ion-label position="floating">CORREO ELECTRÓNICO</ion-label>
          <ion-input type="email" formControlName="correo"></ion-input>
        </ion-item>
        <small class="err" *ngIf="usuarioForm.get('correo')?.touched && usuarioForm.get('correo')?.invalid">REVISAR CANAL</small>

        <ion-row>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="floating">CLAVE</ion-label>
              <ion-input type="password" formControlName="clave"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="floating">RE-CLAVE</ion-label>
              <ion-input type="password" formControlName="reClave"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <small class="err" *ngIf="usuarioForm.hasError('mismatch') && usuarioForm.get('reClave')?.touched">
          LOS CÓDIGOS NO COINCIDEN
        </small>

        <div class="bio-box" (click)="fotoInp.click()">
          <input type="file" #fotoInp (change)="onFileSelected($event)" accept="image/*" hidden>
          
          <div *ngIf="!fotoPreview" class="scan-info">
            <ion-icon name="camera-reverse-outline"></ion-icon>
            <p>BIO-SCANNER: CARGAR FOTO</p>
          </div>
          
          <img *ngIf="fotoPreview" [src]="fotoPreview" class="scan-img">
          <div class="laser" *ngIf="fotoPreview"></div>
        </div>

        <ion-button expand="block" type="submit" [disabled]="subiendoDatos" class="btn-submit">
          {{ subiendoDatos ? 'PROCESANDO...' : 'CONFIRMAR ALTA' }}
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>